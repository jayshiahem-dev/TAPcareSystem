import{c as _e,r as o,A as fe,j as e,G as ye,P as Oe,T as pe,S as Ve,D as Ue,U as ue,a as he,b as Ge,d as be,X as ne,M as ce,H as ge,C as He,R as Ye,E as Qe,e as Me,f as Je}from"./index-Di1IHtsq.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),We=({showCategoryPopup:ee,setShowCategoryPopup:i,selectedCategory:$,setSelectedCategory:l,isSelectingAllPages:V,selectAll:U,triggeredBySelectAllCheckbox:R,selectedResidents:q,paginatedData:te,totalResidents:F,statusSelection:W,categories:C,selectedMunicipality:N,selectedBarangay:X,searchTerm:Q,serverCurrentPage:re,itemsPerPage:A,onFetchData:v,onSelectAllResidents:m,resetSelectionStates:B,handleCategoryCancel:oe,isCreatingAssistance:f,setIsCreatingAssistance:M})=>{const{createAssistance:ae}=o.useContext(fe),[K,de]=o.useState(null),[h,d]=o.useState("Cash"),ie=["Cash","Goods","Relief","Medical","Other"],[S,G]=o.useState(""),[D,I]=o.useState(""),[u,P]=o.useState([{itemName:"",quantity:1,unit:"pc",amount:0}]);o.useEffect(()=>{h==="Cash"?(G(""),I("")):P([{itemName:"",quantity:1,unit:"pc",amount:0}])},[h]);const[y,_]=o.useState({isOpen:!1,status:"success",title:"",message:"",error:null,onRetry:null}),k=()=>{if(h!=="Cash")return!0;if(!S.trim())return I("Please enter an amount"),!1;const r=parseFloat(S);return isNaN(r)?(I("Please enter a valid number"),!1):r<=0?(I("Amount must be greater than 0"),!1):(I(""),!0)},z=()=>{if(h==="Cash")return!0;for(let r=0;r<u.length;r++){const g=u[r];if(!g.itemName.trim())return c("failed",`Item #${r+1}: Item name is required.`,{title:"Validation Error"}),!1;if(!g.quantity||g.quantity<=0)return c("failed",`Item #${r+1}: Quantity must be greater than 0.`,{title:"Validation Error"}),!1;if(!g.unit.trim())return c("failed",`Item #${r+1}: Unit is required.`,{title:"Validation Error"}),!1;if(g.amount<0)return c("failed",`Item #${r+1}: Amount cannot be negative.`,{title:"Validation Error"}),!1}return!0},Z=()=>{P([...u,{itemName:"",quantity:1,unit:"pc",amount:0}])},E=r=>{if(u.length===1){c("info","At least one item is required.",{title:"Cannot Remove"});return}const g=u.filter((n,x)=>x!==r);P(g)},T=(r,g,n)=>{const x=[...u];x[r][g]=n,P(x)},H=async()=>{if(N==="All"){c("failed","Please select a municipality first before proceeding.",{title:"Municipality Required"});return}if(!$){c("failed","Please select a category first.",{title:"Category Required"});return}if(!h){c("failed","Please select a distribution type.",{title:"Distribution Type Required"});return}if(h==="Cash"){if(!k())return}else if(!z())return;const r=C==null?void 0:C.find(b=>b.categoryName===$),g=r==null?void 0:r._id,n=r==null?void 0:r.categoryName;if(!g){c("failed","Category not found. Please try again.",{title:"Category Not Found"});return}let x=[];h==="Cash"?x=[{itemName:"Cash Assistance",quantity:1,unit:"Cash",amount:parseFloat(S)}]:x=u.map(b=>({itemName:b.itemName,quantity:parseInt(b.quantity)||1,unit:b.unit||"pc",amount:parseFloat(b.amount)||0}));const j={categoryId:g,distributionType:h,statusSelection:W,scheduleDate:K?new Date(K):null,filters:{search:Q,municipality:N,barangay:X},items:x,remarks:""};!V&&q.length>0&&(j.residentIds=q),m&&m(j);const le=x.reduce((b,J)=>b+J.amount*J.quantity,0);let p=V?`ALL ${F} residents from all pages`:U?`ALL ${te.length} residents from current page`:`${q.length} residents from current page`;if(ae)try{M(!0);const b=await ae(j);b.success?(c("success",null,{title:"Ayuda Assigned Successfully",message:`${n} has been assigned to ${p}.
Distribution: ${h}
Total Amount: â‚±${le.toLocaleString()}`}),setTimeout(()=>{if(O(),B(),i(!1),v){const J={page:re,limit:A,search:(Q==null?void 0:Q.trim())||"",municipality:N!=="All"?N:"",barangay:X!=="All"?X:""};v(J)}},3e3)):c("failed",b.message||"Failed to assign ayuda. Please try again.",{title:"Assignment Failed",onRetry:H})}catch(b){console.error("Error in createAssistance:",b),c("failed",b.message||"Failed to assign ayuda. Please try again.",{title:"Error",onRetry:H})}finally{M(!1)}else c("success",null,{title:"Ayuda Assignment Simulation",message:`${n} would be assigned to ${p}
Distribution: ${h}
Items: ${JSON.stringify(x,null,2)}`}),setTimeout(()=>{O(),B(),i(!1)},3e3)},se=()=>{if(f){c("info","Cannot cancel while assignment is in progress.",{title:"Operation in Progress"});return}oe()},c=(r,g=null,n={})=>{_({isOpen:!0,status:r,error:g,title:n.title||"",message:n.message||"",onRetry:n.onRetry||null})},O=()=>{_(r=>({...r,isOpen:!1}))};return ee?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 overflow-y-auto",children:e.jsx("div",{className:"category-popup w-full max-w-2xl rounded-xl border border-gray-200 bg-white shadow-2xl dark:border-gray-700 dark:bg-gray-800 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-orange-100 p-2 dark:bg-orange-900/30",children:e.jsx(ye,{className:"text-orange-600 dark:text-orange-400",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:V?"Assign Ayuda to All Residents":"Assign Ayuda to Selected Residents"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Status Selection:"," ",e.jsx("span",{className:`font-bold ${W==="All"?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"}`,children:W})]})]})]}),e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:V?e.jsxs(e.Fragment,{children:["ðŸ“‹ ",e.jsxs("span",{className:"font-bold",children:[F," residents"]})," from ",e.jsx("span",{className:"font-bold",children:"all pages"})," will be selected."]}):U||R?e.jsxs(e.Fragment,{children:["ðŸ“‹ ",e.jsxs("span",{className:"font-bold",children:[te.length," residents"]})," from ",e.jsx("span",{className:"font-bold",children:"current page"})," will be selected."]}):e.jsxs(e.Fragment,{children:["ðŸ“‹ ",e.jsxs("span",{className:"font-bold",children:[q.length," residents"]})," from current page will be selected."]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Select Ayuda Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:$,onChange:r=>l(r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:f,children:[e.jsx("option",{value:"",children:"-- Select Category --"}),C==null?void 0:C.map(r=>e.jsx("option",{value:r.categoryName,children:r.categoryName},r._id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Distribution Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:h,onChange:r=>d(r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:f,children:ie.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:h==="Cash"?"Monetary assistance â€“ specify amount below.":"Non-cash items â€“ add items with quantity, unit, and optional amount."})]}),h==="Cash"?e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Cash Amount (per resident) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"â‚±"})}),e.jsx("input",{type:"text",value:S,onChange:r=>G(r.target.value),onBlur:k,className:`w-full rounded-lg border ${D?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-orange-500"} bg-white pl-10 pr-3 py-2 text-gray-900 focus:outline-none focus:ring-2 dark:border-gray-600 dark:bg-gray-900 dark:text-white`,placeholder:"0.00",disabled:f})]}),D&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:D})]}):e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Items to Distribute ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("button",{type:"button",onClick:Z,className:"flex items-center gap-1 text-sm bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-lg transition-colors disabled:opacity-50",disabled:f,children:[e.jsx(Oe,{size:16})," Add Item"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Item Name"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Qty"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-600 dark:text-gray-300",children:"Unit"}),e.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-600 dark:text-gray-300",children:"Action"})]})}),e.jsx("tbody",{children:u.map((r,g)=>e.jsxs("tr",{className:"border-b dark:border-gray-600",children:[e.jsx("td",{className:"px-2 py-2",children:e.jsx("input",{type:"text",value:r.itemName,onChange:n=>T(g,"itemName",n.target.value),className:"w-full rounded border border-gray-300 px-2 py-1 text-sm dark:border-gray-600 dark:bg-gray-900 dark:text-white",placeholder:"e.g., Rice",disabled:f})}),e.jsx("td",{className:"px-2 py-2",children:e.jsx("input",{type:"number",min:"1",step:"1",value:r.quantity,onChange:n=>T(g,"quantity",parseInt(n.target.value)||1),className:"w-20 rounded border border-gray-300 px-2 py-1 text-sm dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:f})}),e.jsx("td",{className:"px-2 py-2",children:e.jsx("input",{type:"text",value:r.unit,onChange:n=>T(g,"unit",n.target.value),className:"w-full rounded border border-gray-300 px-2 py-1 text-sm dark:border-gray-600 dark:bg-gray-900 dark:text-white",placeholder:"kg, sack, pc",disabled:f})}),e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>E(g),className:"text-red-600 hover:text-red-800 disabled:opacity-50 dark:text-red-400 dark:hover:text-red-300",disabled:f||u.length===1,children:e.jsx(pe,{size:16})})})]},g))})]})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Enter item details. Quantity is per resident. Amount is optional (will be summed as total amount)."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Schedule Date (Optional)"}),e.jsx("input",{type:"date",value:K||"",onChange:r=>de(r.target.value),className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:f})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:se,className:"rounded-lg border border-gray-300 px-4 py-2 text-gray-700 transition-colors hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",disabled:f,children:"Cancel"}),e.jsx("button",{onClick:H,className:"flex items-center gap-2 rounded-lg bg-orange-600 px-4 py-2 text-white transition-colors hover:bg-orange-700 disabled:opacity-50",disabled:!$||!h||h==="Cash"&&!S.trim()||h!=="Cash"&&u.some(r=>!r.itemName.trim())||f||h==="Cash"&&D,children:f?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{size:16})," Assign Ayuda"]})})]})]})})}),e.jsx(Ve,{isOpen:y.isOpen,onClose:O,status:y.status,error:y.error,title:y.title,message:y.message,onRetry:y.onRetry})]}):null},Ke=({data:ee,searchTerm:i,setSearchTerm:$,selectedMunicipality:l,setSelectedMunicipality:V,selectedBarangay:U,setSelectedBarangay:R,filteredBarangays:q,municipalityOptions:te,itemsPerPage:F,setItemsPerPage:W,setCurrentPage:C,theme:N,onViewResident:X,onDownloadTemplate:Q,onDeleteResident:re,pagination:A,onFetchData:v,isLoading:m,onClearSearch:B,onClearMunicipality:oe,onClearBarangay:f,barangays:M,onSelectAllResidents:ae,categories:K})=>{const de=[5,10,20,50,100],{createAssistance:h}=o.useContext(fe),[d,ie]=o.useState(!1),[S,G]=o.useState(null),[D,I]=o.useState(i),[u,P]=o.useState(U||"All"),[y,_]=o.useState(!1),[k,z]=o.useState([]),[Z,E]=o.useState(!1),[T,H]=o.useState(""),[se,c]=o.useState(!1),[O,r]=o.useState(!1),[g,n]=o.useState("Priority"),x=ee||[],j=(A==null?void 0:A.totalPages)||1,le=(A==null?void 0:A.totalResidents)||0,p=(A==null?void 0:A.currentPage)||1;console.log("data",ee);const b=t=>{switch(t){case"Validated":return N==="dark"?"bg-green-900/30 text-green-400":"bg-green-100 text-green-700";case"Pending":return N==="dark"?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-700";case"Missing Info":return N==="dark"?"bg-orange-900/30 text-orange-400":"bg-orange-100 text-orange-700";default:return N==="dark"?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-700"}},J=t=>[t.firstname&&t.firstname!=="None"?t.firstname:null,t.middlename&&t.middlename!=="None"?t.middlename:null,t.lastname&&t.lastname!=="None"?t.lastname:null,t.suffix&&t.suffix!=="None"?t.suffix:null].filter(s=>s!==null&&s!=="").join(" "),je=t=>{if(!t||t==="None"||t==="")return"N/A";try{const a=new Date(t);if(isNaN(a.getTime()))return t;const s=new Date;let Y=s.getFullYear()-a.getFullYear();const w=s.getMonth()-a.getMonth();return(w<0||w===0&&s.getDate()<a.getDate())&&Y--,`${a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})} (${Y}y/o)`}catch(a){return console.error("Error formatting birthdate:",a),t}},ke=t=>{if(!t||t==="None"||t==="")return"N/A";try{const a=new Date(t);if(isNaN(a.getTime()))return"N/A";const s=new Date;let Y=s.getFullYear()-a.getFullYear();const w=s.getMonth()-a.getMonth();return(w<0||w===0&&s.getDate()<a.getDate())&&Y--,`${Y} years old`}catch(a){return console.error("Error calculating age:",a),"N/A"}};o.useEffect(()=>{I(i)},[i]),o.useEffect(()=>{P(U||"All")},[U]),o.useEffect(()=>{if(y&&x.length>0){const t=x.map(a=>a._id);z(t),O&&setTimeout(()=>{E(!0),r(!1)},100)}else!y&&k.length===x.length&&x.length>0&&z([])},[y,x,O]),o.useEffect(()=>{const t=setTimeout(()=>{$&&$(D)},2e3);return()=>{clearTimeout(t)}},[D,$]);const Ne=()=>l==="All"?(alert("Please select a municipality first before using 'Select All' functionality."),!1):!0,ve=()=>l==="All"?["All"]:M&&M.length>0?["All",...M]:q&&q.length>0?["All",...q]:["All"],L=t=>{if(v){const a={page:t,limit:F};i&&i.trim()!==""&&(a.search=i),l!=="All"&&(a.municipality=l),u!=="All"&&(a.barangay=u),v(a)}C(t)},we=t=>{const a=parseInt(t);if(W(a),v){const s={page:1,limit:a};i&&i.trim()!==""&&(s.search=i),l!=="All"&&(s.municipality=l),u!=="All"&&(s.barangay=u),v(s)}C(1)},Ae=t=>{const a=t.target.value;I(a)},xe=()=>{I(""),B&&B()},Ce=t=>{const a=t.target.value;if(console.log("Municipality changed to:",a),V&&V(a),P("All"),R&&R("All"),v){const s={page:1,limit:F,municipality:a!=="All"?a:void 0,barangay:void 0};i&&i.trim()!==""&&(s.search=i),v(s)}},Se=t=>{const a=t.target.value;if(console.log("Barangay changed to:",a),P(a),R&&R(a),v){const s={page:1,limit:F,barangay:a!=="All"?a:void 0,municipality:l!=="All"?l:void 0};i&&i.trim()!==""&&(s.search=i),v(s)}},De=t=>{G({id:t._id,name:t.name})},Ie=()=>{S&&re&&(re(S.id),G(null))},Pe=()=>{G(null)},ze=t=>{if(k.includes(t)){const a=k.filter(s=>s!==t);z(a),y&&a.length!==x.length&&(_(!1),n("Priority"))}else{const a=[...k,t];z(a),!y&&a.length===x.length&&(_(!0),n("Priority"))}c(!1),r(!1),n("Priority")},Ee=()=>{if(!y&&l==="All"){alert("Please select a municipality first before using 'Select All on This Page' functionality.");return}const t=!y;_(t),t?(r(!0),c(!1),n("All")):(z([]),c(!1),r(!1),n("Priority"))},$e=()=>{Ne()&&(c(!0),r(!1),n("All"),E(!0))},Re=()=>{if(l==="All"){alert("Please select a municipality first before assigning ayuda.");return}c(!1),r(!1),n("Priority"),E(!0)},qe=()=>{E(!1),H(""),c(!1),_(!1),z([]),r(!1),n("Priority")},me=()=>{E(!1),H(""),c(!1),r(!1),n("Priority"),(se||O)&&(_(!1),z([]))};o.useEffect(()=>{const t=s=>{s.key==="Escape"&&(G(null),E(!1))},a=s=>{Z&&s.target.closest(".category-popup")===null&&me()};return document.addEventListener("keydown",t),document.addEventListener("mousedown",a),()=>{document.removeEventListener("keydown",t),document.removeEventListener("mousedown",a)}},[Z]);const Fe=ve();return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{deleteConfirm:S,onCancelDelete:Pe,onConfirmDelete:Ie,theme:N}),e.jsx(We,{showCategoryPopup:Z,setShowCategoryPopup:E,selectedCategory:T,setSelectedCategory:H,isSelectingAllPages:se,selectAll:y,triggeredBySelectAllCheckbox:O,selectedResidents:k,paginatedData:x,totalResidents:le,statusSelection:g,categories:K,selectedMunicipality:l,selectedBarangay:U,searchTerm:i,serverCurrentPage:p,itemsPerPage:F,onFetchData:v,onSelectAllResidents:ae,resetSelectionStates:qe,handleCategoryCancel:me,isCreatingAssistance:d,setIsCreatingAssistance:ie}),e.jsxs("div",{className:"mb-8 overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition-colors duration-300 dark:border-gray-700 dark:bg-gray-800",children:[e.jsxs("div",{className:"border-b border-gray-200 p-6 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex items-center gap-2 text-xl font-semibold text-gray-900 dark:text-white",children:[e.jsx(ue,{size:24,className:"text-orange-600 dark:text-orange-400"}),"Resident Master List"]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:[le," residents listed in ",l!=="All"?l:"all municipalities"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[k.length>0&&e.jsxs("div",{className:"mr-2 flex items-center gap-2 rounded-lg border border-orange-200 bg-orange-50 px-3 py-2 dark:border-orange-800 dark:bg-orange-900/20",children:[e.jsx(he,{className:"text-orange-600 dark:text-orange-400",size:16}),e.jsxs("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:[k.length," selected"]})]}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 transition-colors hover:border-orange-300 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:border-orange-600 dark:hover:bg-gray-700",disabled:m||d,children:[e.jsx(Ge,{size:16}),"Template"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"relative md:col-span-2",children:[e.jsx(be,{className:"absolute left-3 top-1/2 -translate-y-1/2 transform text-gray-400 dark:text-gray-500",size:18}),e.jsx("input",{type:"text",placeholder:"Search by name or RFID...",value:D,onChange:Ae,className:"w-full rounded-lg border border-gray-300 bg-white py-2 pl-10 pr-4 text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:m||d}),D&&e.jsx("button",{onClick:xe,className:"absolute right-3 top-1/2 -translate-y-1/2 transform text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",disabled:m||d,children:e.jsx(ne,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("select",{value:l,onChange:Ce,className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:m||d,children:te.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("select",{value:u,onChange:Se,className:"w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-900 dark:text-white",disabled:l==="All"||m||d,title:l==="All"?"Please select a municipality first":"",children:Fe.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),(l!=="All"||u!=="All"||i)&&e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[l!=="All"&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-orange-100 px-3 py-1 text-sm text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",children:[e.jsx(ce,{size:12}),l,e.jsx("button",{onClick:oe,className:"ml-1 hover:text-orange-900 dark:hover:text-orange-300",disabled:m||d,children:e.jsx(ne,{size:12})})]}),u!=="All"&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-3 py-1 text-sm text-green-700 dark:bg-green-900/30 dark:text-green-400",children:[e.jsx(ge,{size:12}),u,e.jsx("button",{onClick:()=>{P("All"),R&&R("All"),f&&f()},className:"ml-1 hover:text-green-900 dark:hover:text-green-300",disabled:m||d,children:e.jsx(ne,{size:12})})]}),i&&e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[e.jsx(be,{size:12}),"Search: ",i,e.jsx("button",{onClick:xe,className:"ml-1 hover:text-blue-900 dark:hover:text-blue-300",disabled:m||d,children:e.jsx(ne,{size:12})})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:m?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 animate-spin rounded-full border-b-2 border-orange-500"}),e.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:"Loading residents..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 bg-gray-50 px-4 py-3 dark:border-gray-700 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex cursor-pointer items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:Ee,className:"h-4 w-4 rounded border-gray-300 text-orange-600 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-700",disabled:d||l==="All",title:l==="All"?"Select a municipality first":""}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select All"})]}),k.length>0&&e.jsxs("button",{onClick:()=>{if(l==="All"){alert("Please select a municipality first before assigning ayuda.");return}Re()},className:"ml-2 flex items-center gap-2 rounded-lg bg-orange-600 px-3 py-1.5 text-sm text-white transition-colors hover:bg-orange-700",disabled:d,children:[e.jsx(ye,{size:14}),"Assign Ayuda (",k.length,")"]})]}),j>1&&e.jsxs("button",{onClick:$e,className:"flex items-center gap-2 rounded-lg border border-orange-300 bg-orange-50 px-3 py-1.5 text-sm font-medium text-orange-700 transition-colors hover:bg-orange-100 dark:border-orange-700 dark:bg-orange-900/30 dark:text-orange-300 dark:hover:bg-orange-900/50",disabled:d,title:l==="All"?"Please select a municipality first":"Select all residents from all pages",children:[e.jsx(he,{size:14}),"Select All Residents"]})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-900/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 p-4"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"HouseHold Id"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Name"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(He,{size:14}),"BirthDate"]})}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Gender"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Barangay"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Municipality"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Contact"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"RFID"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Status"}),e.jsx("th",{className:"p-4 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:x.length>0?x.map(t=>e.jsxs("tr",{className:"border-t border-gray-100 transition-colors hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",checked:k.includes(t._id),onChange:()=>ze(t._id),className:"h-4 w-4 rounded border-gray-300 text-orange-600 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-700",disabled:d})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.household_id})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:J(t)})}),e.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:je(t.birth_date)}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Age: ",ke(t.birth_date)]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-medium ${t.gender==="Male"?N==="dark"?"bg-blue-900/30 text-blue-400":"bg-blue-100 text-blue-700":N==="dark"?"bg-pink-900/30 text-pink-400":"bg-pink-100 text-pink-700"}`,children:t.gender})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded bg-green-100 px-2 py-1 text-sm text-green-700 dark:bg-green-900/30 dark:text-green-400",children:[e.jsx(ge,{size:12}),t.barangay]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded bg-indigo-100 px-2 py-1 text-sm text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400",children:[e.jsx(ce,{size:12}),t.municipality]})}),e.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:t.contact_number}),e.jsx("td",{className:"p-4",children:t.rfid?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded bg-purple-100 px-2 py-1 text-sm text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",children:[e.jsx(Ye,{size:12}),t.rfid]}):e.jsx("span",{className:"text-xs italic text-gray-400 dark:text-gray-500",children:"No RFID"})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs font-bold uppercase ${b(t.status)}`,children:t.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>X(t),className:"rounded p-1.5 text-gray-500 transition-colors hover:border hover:border-gray-300 hover:bg-gray-100 dark:text-gray-400 dark:hover:border-gray-600 dark:hover:bg-gray-700",title:"View Full Information",disabled:d,children:e.jsx(Qe,{size:16})}),e.jsx("button",{onClick:()=>De(t),className:"rounded p-1.5 text-red-500 transition-colors hover:border hover:border-red-200 hover:bg-red-50 dark:text-red-400 dark:hover:border-red-800 dark:hover:bg-red-900/20",title:"Delete Resident",disabled:d,children:e.jsx(pe,{size:16})})]})})]},t.id||t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(ue,{className:"mb-2 text-gray-400 dark:text-gray-600",size:48}),e.jsx("p",{className:"font-medium text-gray-500 dark:text-gray-400",children:"No residents found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400 dark:text-gray-500",children:"Try changing your search or filter criteria"})]})})})})]})]})}),!m&&e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 border-t border-gray-200 p-4 dark:border-gray-700 md:flex-row",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show:"}),e.jsx("select",{value:F,onChange:t=>we(t.target.value),className:"rounded border border-gray-300 bg-white px-2 py-1 text-sm text-gray-700 focus:outline-none focus:ring-1 focus:ring-orange-500 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300",disabled:m||d,children:de.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"entries per page"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(p-1),disabled:p===1||m||d,className:"rounded-lg p-2 text-gray-600 transition-colors hover:border hover:border-orange-300 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50 dark:text-gray-400 dark:hover:border-orange-600 dark:hover:bg-gray-700",children:e.jsx(Me,{size:18})}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const t=[];if(j<=5)for(let s=1;s<=j;s++)t.push(e.jsx("button",{onClick:()=>L(s),className:`min-w-[2rem] rounded-lg px-2 py-1 text-sm font-medium transition-colors ${p===s?"bg-orange-600 text-white":"text-gray-600 hover:border hover:border-orange-300 hover:bg-gray-100 dark:text-gray-400 dark:hover:border-orange-600 dark:hover:bg-gray-700"}`,disabled:m||d,children:s},s));else{t.push(e.jsx("button",{onClick:()=>L(1),className:`min-w-[2rem] rounded-lg px-2 py-1 text-sm font-medium transition-colors ${p===1?"bg-orange-600 text-white":"text-gray-600 hover:border hover:border-orange-300 hover:bg-gray-100 dark:text-gray-400 dark:hover:border-orange-600 dark:hover:bg-gray-700"}`,disabled:m||d,children:"1"},1)),p>3&&t.push(e.jsx("span",{className:"px-1 text-gray-400 dark:text-gray-600",children:"..."},"ellipsis-start"));const s=Math.max(2,p-1),Y=Math.min(j-1,p+1);for(let w=s;w<=Y;w++)t.push(e.jsx("button",{onClick:()=>L(w),className:`min-w-[2rem] rounded-lg px-2 py-1 text-sm font-medium transition-colors ${p===w?"bg-orange-600 text-white":"text-gray-600 hover:border hover:border-orange-300 hover:bg-gray-100 dark:text-gray-400 dark:hover:border-orange-600 dark:hover:bg-gray-700"}`,disabled:m||d,children:w},w));p<j-2&&t.push(e.jsx("span",{className:"px-1 text-gray-400 dark:text-gray-600",children:"..."},"ellipsis-end")),t.push(e.jsx("button",{onClick:()=>L(j),className:`min-w-[2rem] rounded-lg px-2 py-1 text-sm font-medium transition-colors ${p===j?"bg-orange-600 text-white":"text-gray-600 hover:border hover:border-orange-300 hover:bg-gray-100 dark:text-gray-400 dark:hover:border-orange-600 dark:hover:bg-gray-700"}`,disabled:m||d,children:j},j))}return t})()}),e.jsx("button",{onClick:()=>L(p+1),disabled:p===j||j===0||m||d,className:"rounded-lg p-2 text-gray-600 transition-colors hover:border hover:border-orange-300 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50 dark:text-gray-400 dark:hover:border-orange-600 dark:hover:bg-gray-700",children:e.jsx(Je,{size:18})})]})]})]})]})};export{Ke as default};
