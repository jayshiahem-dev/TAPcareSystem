import{r as W,A as q,j as r,E as F,R as G,T as J}from"./index-fqGUgWTJ.js";const X=({data:c,searchTerm:b,setSearchTerm:n,selectedMunicipality:u,setSelectedMunicipality:f,selectedBarangay:v,setSelectedBarangay:w,filteredBarangays:C,municipalityOptions:S,itemsPerPage:g,setItemsPerPage:_,currentPage:l,setCurrentPage:i,theme:$,onViewResident:E,onAssignRFID:D,onDeleteResident:R,pagination:d,isLoading:t,onClearSearch:O,onClearMunicipality:Q,onClearBarangay:U,selectedIds:y,onToggleSelect:z,onSelectAll:A,onDeselectAll:T,LatestAssistances:p})=>{const{assignAyuda:j}=W.useContext(q),m=c.length>0&&c.every(e=>y.has(e._id)),B=c.some(e=>y.has(e._id))&&!m,o=p==null?void 0:p._id,I=async()=>{if(!o)return alert("No active assistance found.");const e=c.map(s=>s._id);try{await j(o,e),m?T(o):A(o)}catch(s){console.error("Error in bulk update:",s)}},M=async e=>{if(!o)return alert("No active assistance found.");try{await j(o,[e]),z(e,o)}catch(s){console.error("Error updating resident assignment:",s)}},H=()=>{const e=(d==null?void 0:d.totalPages)||1,s=l||1,N=2,k=[],h=[];let x;for(let a=1;a<=e;a++)(a===1||a===e||a>=s-N&&a<=s+N)&&k.push(a);return k.forEach(a=>{x&&(a-x===2?h.push(x+1):a-x!==1&&h.push("...")),h.push(a),x=a}),h};return r.jsxs("div",{className:"relative rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",children:[r.jsx("div",{className:"border-b border-gray-200 p-4 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Show:"}),r.jsx("select",{value:g,onChange:e=>{_(Number(e.target.value)),i(1)},disabled:t,className:"rounded-lg border px-2 py-2 text-sm disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700",children:[10,25,50,100].map(e=>r.jsx("option",{value:e,children:e},e))})]}),r.jsx("div",{className:"min-w-[200px] flex-1",children:r.jsx("input",{type:"text",placeholder:"Search by name, household ID...",value:b,onChange:e=>n(e.target.value),disabled:t,className:"w-full rounded-lg border px-3 py-2 disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700"})}),r.jsx("select",{value:u,onChange:e=>f(e.target.value),disabled:t,className:"rounded-lg border px-3 py-2 disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700",children:S.map(e=>r.jsx("option",{value:e,children:e},e))}),r.jsx("select",{value:v,onChange:e=>w(e.target.value),disabled:t||u==="All",className:"rounded-lg border px-3 py-2 disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700",children:C.map(e=>r.jsx("option",{value:e,children:e},e))})]})}),r.jsxs("div",{className:"relative",children:[t&&r.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/50 dark:bg-gray-900/50",children:r.jsxs("div",{className:"flex items-center gap-3 rounded-lg bg-white p-4 shadow-lg dark:bg-gray-800",children:[r.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-4 border-solid border-orange-600 border-r-transparent"}),r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Processing..."})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("thead",{className:"bg-gray-50 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400",children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-10 px-6 py-3",children:r.jsx("input",{type:"checkbox",checked:m,ref:e=>e&&(e.indeterminate=B),onChange:I,disabled:t,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500 disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700"})}),r.jsx("th",{className:"px-6 py-3",children:"Name"}),r.jsx("th",{className:"px-6 py-3",children:"Household ID"}),r.jsx("th",{className:"px-6 py-3",children:"Barangay"}),r.jsx("th",{className:"px-6 py-3",children:"Status"}),r.jsx("th",{className:"px-6 py-3",children:"Actions"})]})}),r.jsx("tbody",{children:c.map(e=>r.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-600",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"checkbox",checked:y.has(e._id),onChange:()=>M(e._id),disabled:t,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500 disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700"})}),r.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:`${e.lastname}, ${e.firstname} ${e.middlename||""}`}),r.jsx("td",{className:"px-6 py-4",children:e.household_id}),r.jsx("td",{className:"px-6 py-4",children:e.barangay}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${K(e.status,$)}`,children:e.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>E(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",children:r.jsx(F,{size:18})}),r.jsx("button",{onClick:()=>D(e),className:"text-green-600 hover:text-green-900 dark:text-green-400",children:r.jsx(G,{size:18})}),r.jsx("button",{onClick:()=>{window.confirm(`Delete ${e.firstname}?`)&&R(e._id,`${e.firstname} ${e.lastname}`)},className:"text-red-600 hover:text-red-900 dark:text-red-400",children:r.jsx(J,{size:18})})]})})]},e._id))})]})})]}),d&&d.totalPages>1&&r.jsx("div",{className:"border-t border-gray-200 p-4 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:["Showing ",(l-1)*g+1," to ",Math.min(l*g,d.totalResidents)," of ",d.totalResidents]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>i(l-1),disabled:l<=1||t,className:"rounded border px-3 py-1 disabled:opacity-50 dark:border-gray-600",children:"Previous"}),H().map((e,s)=>r.jsx("button",{onClick:()=>typeof e=="number"&&i(e),className:`rounded border px-3 py-1 ${e===l?"bg-orange-600 text-white":"hover:bg-gray-100"}`,children:e},s)),r.jsx("button",{onClick:()=>i(l+1),disabled:l>=d.totalPages||t,className:"rounded border px-3 py-1 disabled:opacity-50 dark:border-gray-600",children:"Next"})]})]})})]})},K=(c,b)=>{const n=b==="dark";switch(c){case"Active":return n?"bg-green-900/30 text-green-400":"bg-green-100 text-green-700";case"Inactive":return n?"bg-yellow-900/30 text-yellow-400":"bg-yellow-100 text-yellow-700";case"Deceased":return n?"bg-red-900/30 text-red-400":"bg-red-100 text-red-700";default:return n?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-700"}};export{X as default};
